<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
    <head>
        <title>Hudson and Jenkins Plugin</title>
	    <link rel="stylesheet" href="styles/site.css" type="text/css" />
        <META http-equiv="Content-Type" content="text/html; charset=UTF-8">	    
    </head>

    <body>
	    <table class="pagecontent" border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
<td style="width:10%"/>
			    <td valign="top" class="pagebody">
				    <div class="pageheader">
					    <span class="pagetitle">
                            Hudson and Jenkins Plugin
                                                    </span>
				    </div>
				    <div class="pagesubheading">
					    This page last changed on Dec 01, 2011 by <font color="#0050B2">ian.buchanan@versionone.com</font>.
                                    </div>

				    <div>
<ul>
    <li><a href='#HudsonandJenkinsPlugin-Description'>Description</a></li>
    <li><a href='#HudsonandJenkinsPlugin-SystemRequirements'>System Requirements</a></li>
    <li><a href='#HudsonandJenkinsPlugin-Downloads'>Downloads</a></li>
    <li><a href='#HudsonandJenkinsPlugin-Installation'>Installation</a></li>
    <li><a href='#HudsonandJenkinsPlugin-Configuration'>Configuration</a></li>
<ul>
    <li><a href='#HudsonandJenkinsPlugin-ConfigureVersionOne'>Configure VersionOne </a></li>
    <li><a href='#HudsonandJenkinsPlugin-ConfigureHudson%2FJenkins'>Configure Hudson/Jenkins </a></li>
</ul>
    <li><a href='#HudsonandJenkinsPlugin-TechnicalDetails'>Technical Details</a></li>
<ul>
    <li><a href='#HudsonandJenkinsPlugin-AddingSupportforanothersourcecodemanagementsystem'>Adding Support for another source code management system</a></li>
</ul>
</ul></div>
<h1><a name="HudsonandJenkinsPlugin-Description"></a>Description</h1>

<p>The VersionOne Hudson/Jenkins integration creates a record of builds in VersionOne, so the development teams can associate stories and defects to a particular build. This visibility is useful when identifying problem builds or generating release notes.</p>

<p>Once the VersionOne Plugin has been installed, team members include a VersionOne identifier , such as “S-01454” or "TK-01234", in the comments of their SCM commit. Every time a build executes the publisher creates a BuildRun asset in VersionOne with details of the build. The VersionOne BuildRun is visible on the 'Relationship' tab of the Story/Defect Details page.</p>

<p>Using this integration you can better answer the following questions:</p>

<ul>
	<li>Defects
	<ul>
		<li>Which build the defect was reported against?</li>
		<li>Which build contained the fix for the defect?</li>
		<li>Which builds contain work for the defect?</li>
	</ul>
	</li>
</ul>


<ul>
	<li>For Stories (Backlog Item)
	<ul>
		<li>Which builds contain work for the story?</li>
		<li>Which build contained the completed story?</li>
	</ul>
	</li>
</ul>


<ul>
	<li>For Build Runs
	<ul>
		<li>Which defects were fixed?</li>
		<li>Which stories were completed?</li>
		<li>Which defects were introduced?</li>
		<li>When work for a story or defect was included?</li>
		<li>Which Change-sets were included?</li>
	</ul>
	</li>
</ul>


<ul>
	<li>For a range of Build Runs
	<ul>
		<li>Which stories were completed?</li>
		<li>Which defects were fixed?</li>
		<li>Which defects were introduced?</li>
	</ul>
	</li>
</ul>



<p>The following sequence diagram illustrates the VersionOne Hudson/Jenkins publisher behavior.<br/>
<span class="image-wrap" style=""><a class="confluence-thumbnail-link 736x534" href='attachments/5111829/Hudson.png'><img src="attachments/thumbnails/5111829/8257547" style="border: 0px solid black"/></a></span></p>

<h1><a name="HudsonandJenkinsPlugin-SystemRequirements"></a>System Requirements</h1>

<p>VersionOne: </p>
<ul>
	<li>8.1 or above, including Team Edition</li>
</ul>


<p>Integration Server:</p>
<ul>
	<li>Operating System---Windows 2000, 2003</li>
</ul>


<p>Continuous Integration Server:</p>
<ul>
	<li>Tested with Hudson version 1.336 - 2.1</li>
	<li>Tested with Jenkins version 1.336 - 1.433</li>
</ul>


<p>Supported Source Code Management:</p>
<ul>
	<li>Subversion - 1.17 or better</li>
	<li>Perforce - 1.1.5 or better</li>
	<li>Git - 1.3.1 or better</li>
</ul>


<h1><a name="HudsonandJenkinsPlugin-Downloads"></a>Downloads</h1>

<p>The latest version of V1Publisher is available at <a href="http://community.versionone.com/sdk/Documentation/Integrations.aspx">V1: Integration Downloads</a></p>

<h1><a name="HudsonandJenkinsPlugin-Installation"></a>Installation</h1>

<p>These instructions presume that <a href="http://hudson-ci.org/">Hudson</a> or <a href="http://jenkins-ci.org/">Jenkins</a> is already installed, configured, and working properly.</p>
<ol>
	<li>Ensure Connectivity<br/>
Verify that you can connect to your VersionOne instance from the machine hosting Hudson or Jenkins</li>
	<li>Extract Files<br/>
Download VersionOne plugin from the link above and extract it into a folder of your choice. This can be a temporary location since we will copy some of these files during configuration.</li>
	<li>Configure
	<ol>
		<li><a href="#HudsonandJenkinsPlugin-ConfigureV1">Configure VersionOne</a></li>
		<li><a href="#HudsonandJenkinsPlugin-ConfigureHudson">Configure Hudson/Jenkins</a></li>
	</ol>
	</li>
	<li>Verify the installation<br/>
Once configuration is complete use the following steps to verify that the build integration is working
	<ol>
		<li>Navigate to your Hudson/Jenkins instance</li>
		<li>Force a build on the project you configured</li>
		<li>Wait for build to complete</li>
		<li>Navigate to your VersionOne instance</li>
		<li>Login</li>
		<li>Select VersionOne project in 'My Projects' dropdown</li>
		<li>Navigate to the Reports &#124; Reports Overview page</li>
		<li>Select the "Build Run Quicklist" Report</li>
	</ol>
	</li>
</ol>


<h1><a name="HudsonandJenkinsPlugin-Configuration"></a>Configuration</h1>

<h2><a name="HudsonandJenkinsPlugin-ConfigureVersionOne"></a>Configure VersionOne<a name="HudsonandJenkinsPlugin-ConfigureV1"></a> </h2>
<div class='panelMacro'><table class='infoMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>If you are using Team Edition, you need to manually create the Build Project.  Instructions for doing this are available on the <a href="http://community.versionone.com/KnowledgeBase/FAQs/Q11417.aspx">VersionOne Community Site</a>.</td></tr></table></div>
<ol>
	<li>Log into the VersionOne application as admin</li>
	<li>Navigate to the Admin &#124; Configuration &#124; System page.</li>
	<li>Check the “Enable Build Integration” checkbox and click the Apply button.<br/>
<span class="image-wrap" style=""><a class="confluence-thumbnail-link 1247x803" href='attachments/5111829/EnableBuildIntegration.jpg'><img src="attachments/thumbnails/5111829/5308424" style="border: 0px solid black"/></a></span></li>
	<li>Navigate to the Admin &#124; Projects &#124; Build Project page<br/>
<span class="image-wrap" style=""><a class="confluence-thumbnail-link 1249x319" href='attachments/5111829/BuildProjects.jpg'><img src="attachments/thumbnails/5111829/5308423" style="border: 0px solid black"/></a></span></li>
	<li>Click Add to add a new Build Project</li>
	<li>Specify the following
	<ul>
		<li>Name &#8211; this is how the Build Project will be known to VersionOne users</li>
		<li>Reference &#8211; this is how the Build Project is known to Hudson/Jenkins</li>
	</ul>
	</li>
	<li>Click Ok to save the new Build Project</li>
	<li>Navigate to the Admin &#124; Projects &#124; Projects page</li>
	<li>Click Edit on the row for the project you want associated with a Build Project</li>
	<li>Using the “Build Projects” dropdown add the appropriate Build Project.<br/>
<span class="image-wrap" style=""><a class="confluence-thumbnail-link 983x624" href='attachments/5111829/AssignBuildProjectToProject.jpg'><img src="attachments/thumbnails/5111829/5308422" style="border: 0px solid black"/></a></span></li>
	<li>Click Ok to accept the changes</li>
	<li>Logout</li>
</ol>


<h2><a name="HudsonandJenkinsPlugin-ConfigureHudson%2FJenkins"></a>Configure Hudson/Jenkins<a name="HudsonandJenkinsPlugin-ConfigureHudson"></a></h2>

<p>These instructions presume that you are logged into Hudson/Jenkins as an administrator.</p>
<ol>
	<li>On the Hudson/Jenkins Dashboard, Click "Manage Hudson" (or Jenkins)</li>
	<li>Click "Manage Plugins"</li>
	<li>Click Advanced</li>
	<li>Under "Upload Plugin" browse to your download location and select the file versionone.hpi<br/>
<span class="image-wrap" style=""><a class="confluence-thumbnail-link 1012x594" href='attachments/5111829/HudsonPluginManager.png'><img src="attachments/thumbnails/5111829/5308420" style="border: 0px solid black"/></a></span></li>
	<li>Click Upload</li>
	<li>Restart your Hudson/Jenkins instance in order to load the new plugin</li>
	<li>On the Hudson Dashboard, Click "Manage Hudson" (or Jenkins)</li>
	<li>Click Configure System<br/>
There is a new VersionOne section at the end of this page</li>
	<li>Provide your VersionOne connection parameters<br/>
<span class="image-wrap" style=""><a class="confluence-thumbnail-link 1023x245" href='attachments/5111829/ConfigureSystem.png'><img src="attachments/thumbnails/5111829/5308419" style="border: 0px solid black"/></a></span><br/>
If you connect to VersionOne through a proxy, check the "Use proxy server" checkbox and provide additional Proxy parameters<br/>
<span class="image-wrap" style=""><a class="confluence-thumbnail-link 1028x354" href='attachments/5111829/ConfigureSystem-Proxy.png'><img src="attachments/thumbnails/5111829/11173914" style="border: 0px solid black"/></a></span>
<div class='panelMacro'><table class='infoMacro'><colgroup><col width='24'><col></colgroup><tr><td valign='top'><img src="images/icons/emoticons/information.gif" width="16" height="16" align="absmiddle" alt="" border="0"></td><td>It is recommended that you do not change the "Reference Field" or "Comment RegEx" fields.  The "Reference Field" is the system name of the attribute to search when matching the ID in change comments with workitems in VersionOne.  The "Comment RegEx" is used to extract workitem identifiers from the change comments.</td></tr></table></div></li>
	<li>Test the connection</li>
	<li>Save the settings</li>
	<li>Choose the Job you wish to have published to VersionOne<br/>
Remember that this job name must be configured in VersionOne</li>
	<li>Click "Configure" to configure the workspace</li>
	<li>In the "Post-build Actions" click the "VersionOne Notifier" checkbox<br/>
<span class="image-wrap" style=""><a class="confluence-thumbnail-link 1001x363" href='attachments/5111829/PostBuildActions.png'><img src="attachments/thumbnails/5111829/5308421" style="border: 0px solid black"/></a></span></li>
	<li>Click "Save"</li>
</ol>


<h1><a name="HudsonandJenkinsPlugin-TechnicalDetails"></a>Technical Details</h1>

<h2><a name="HudsonandJenkinsPlugin-AddingSupportforanothersourcecodemanagementsystem"></a>Adding Support for another source code management system</h2>
<p>To add support for new VCS, the following actions are required.</p>
<ol>
	<li>Add plugin reference to pom.xml, make sure that this dependency could be successfully resolved.</li>
	<li>Add a class wrapping native changeset type. SvnModification or PerforceModification are good examples on how to do it.<br/>
New class must inherit VcsModification interface and provide parameterless public constructor.</li>
	<li>Modify VcsModificationWrapperFactory class to support new changeset type.<br/>
It is required to add line similar to classNameMappings.put("hudson.plugins.perforce.PerforceChangeLogEntry","com.versionone.hudson.PerforceModification"). String literals are mappings of native changeset log entry classes to our custom wrappers in format supported by Java Reflection, so that instances and class objects could be successfully created. Changesets will be processed as soon as user installs the corresponding plugin and restarts Hudson/Jenkins server. In fact, our plugin won’t start without its dependencies.</li>
</ol>



                    			    </td>
<td style="width:10%"/>
		    </tr>
	    </table>
 	    <table border="0" cellpadding="0" cellspacing="0" width="100%" bgcolor="#ffffff">
		    <tr>
			    <td align="left"><font color="grey">Document generated on Dec 01, 2011 11:39</font></td>
		    </tr>
	    </table> 
    </body>
</html>
